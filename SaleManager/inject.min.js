async function get_page(e){return fetch(e).then((e=>e.text())).catch((e=>console.error("Error fetching data:",e)))}class SaleManager{constructor(){this.salesData=new Map,this.start()}async start(){await this.processPage()}async processPage(){const e=await this.get_html();let t=await this.get_links(e);await this.processLinks(t)}async get_html(){return window.location.href.includes("cpanel")?await this.waitForIframeAndElement("tbody"):document.body}async waitForIframeAndElement(e){return new Promise((t=>{const n=()=>{const r=document.querySelector("main iframe");if(!r)return void setTimeout(n,100);const i=()=>{try{const n=(r.contentDocument||r.contentWindow.document).querySelector(e);n?t(n):setTimeout(i,100)}catch(e){setTimeout(n,100)}};i()};n()}))}async get_links(e){const t=[];return e.querySelectorAll("tbody tr").forEach((e=>{const n=e.querySelector("a.update");if(n){const r=n.href.match(/\/id\/(\d+)/)[1];r&&t.push({id:r,trElement:e,url:`https://tl.myvirtualpos.ru/console/sales/view/id/${r}`})}})),t}async processLinks(e){function t(e){e.style.borderLeft="3px solid gray"}function n(e,t){const n=document.createElement("div");n.textContent=t,n.style.display="none",n.style.position="absolute",n.style.background="#ffebee",n.style.border="1px solid #f44336",n.style.padding="4px 8px",n.style.borderRadius="4px",n.style.zIndex="1000",document.body.appendChild(n),e.addEventListener("mouseenter",(e=>{n.style.display="block",n.style.top=`${e.clientY+10}px`,n.style.left=`${e.clientX+10}px`})),e.addEventListener("mouseleave",(()=>{n.style.display="none"})),e.addEventListener("mousemove",(e=>{n.style.top=`${e.clientY+10}px`,n.style.left=`${e.clientX+10}px`}))}for(const r of e)if(!this.salesData.has(r.id)){const e=await this.fetchReceiptHtml(r.url,null!==r.trElement.querySelector("s"));e[0]?t(r.trElement):(r.trElement.style.borderLeft="3px solid red",n(r.trElement,e[1]))}}async analyzeReceipt(e){let t=e[0][0],n=e[0][1],r=e[0][2],i=e[1],s=e[2],o=e[4],l=["","Не задан"];if(e[3])return[!0,""];const c=i.some((e=>"нетовар"===String(e).trim().toLowerCase())),a=i.some((e=>"открытие смены"===String(e).trim().toLowerCase())),d=i.some((e=>"клиентский заказ"===String(e).trim().toLowerCase()));if(!c&&!l.includes(n))return[!1,"Причина непокупки не нужна"];if(a){const e=["ос","открытие","смен","смены"],t=r?r.toLowerCase().split(/\s+/):[];return e.some((e=>t.some((t=>t.includes(e)))))?[!0,""]:[!1,"Для 'открытие смены' в комментарии должны быть ключевые слова: ос, открытие, смен"]}if(c){if(l.includes(t))return[!1,"Для 'нетовар' должен быть указан трафик покупателя"];if(!n||""==n.trim())return[!1,"Для 'нетовар' должна быть указана причина непокупки"];if(l.includes(r))return[!1,"Для 'нетовар' должен быть указан комментарий"]}if(d){if(l.includes(t))return[!1,"Для 'клиентский заказ' должен быть указан трафик"];if(l.includes(r))return[!1,"Для 'клиентский заказ' должен быть указан комментарий"]}if(s){const e=["Яндекс Маркет","Яндекс Еда (Деливери)","ОЗОН","Сбер"],n=["Приложение","Сайт Страсть"],i=["Самовывоз"];if(![...e,...n,...i].includes(t))return console.log([...e,...n,...i],t),[!1,"Для маркет/мобильного заказа должен быть соответствующий трафик"];if(l.includes(r))return[!1,"Для 'мобильного приложения' должен быть указан номер заказа в коментарии"]}if(o){if(!l.includes(t))return[!1,"Чек отменен, убери трафик"]}else if(l.includes(t))return[!1,"Данный чек требует указания трафика"];return[!0,""]}async fetchReceiptHtml(e,t){let n=await get_page(e),r=document.createElement("div");r.innerHTML=n,r=r.querySelector("#yw0");let i=r.querySelector("table.detail-view tbody"),s=!i.querySelector("tr:nth-child(17)").classList.contains("cssDisplayNone"),o=t;i=[i.querySelector("tr:nth-child(19) td").innerText,i.querySelector("tr:nth-child(20) td").innerText,i.querySelector("tr:nth-child(21) td").innerText];let l=r.querySelectorAll("#receipt-items tbody tr"),c=[];l.forEach((e=>{let t=e.querySelector("td:nth-child(2)");t=t.innerText.trim(),c.push(t)}));let a=!1;if(!r.querySelector("#yw2 table tbody tr td").classList.contains("empty")){let e=r.querySelector("#yw2 table tbody tr:nth-child(1)");a="Применена"==e.querySelector("td:nth-child(3)").innerText.trim()&&"Скидка служебная МП"==e.querySelector("td:nth-child(2)").innerText.trim()}return this.analyzeReceipt([i,c,a,s,o])}}new SaleManager;const originalXHROpen=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(e,t){this._requestUrl=t,(t.includes("ajax=receipts-grid")||window.location.href.includes("sales/manage"))&&(this.addEventListener("load",(function(){setTimeout((()=>{new SaleManager}),100)})),this.addEventListener("error",(function(){}))),originalXHROpen.apply(this,arguments)};